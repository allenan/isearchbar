/*
 *  iSearchbar - v0.0.1
 *  An iOS7-style searchbar plugin for jQuery
 *  https://github.com/allenan/isearchbar
 *
 *  Made by Andrew Allen
 *  Under MIT License
 */

(function(){!function(a,b,c){var d,e,f;return f="iSearchbar",e={placeholderText:"Search...",cancelText:"Cancel",cancelClass:""},d=function(){function b(b,c){this.element=b,this.options=a.extend({},e,c),this._defaults=e,this._name=f,this.init()}return b.prototype.init=function(){return this.$input=a(this.element),this.setupHtmlStructure(),this.setListeners()},b.prototype.setupHtmlStructure=function(){var b,c,d;return this.$input.attr("placeholder",this.options.placeholderText),this.$input.wrap("<div class='isearchbar-container'></div>"),this.$input.wrap("<div class='isearchbar-input-wrapper'></div>"),c=a(".isearchbar-input-wrapper"),b=a(c),d=a(".isearchbar-container"),this.$root=a(d),b.prepend(this.createIconSpan()),this.$root.append(this.createCancelButton())},b.prototype.createCancelButton=function(){return a(c.createElement("a")).addClass("isearchbar-cancel").addClass(this.options.cancelClass).html(this.options.cancelText)},b.prototype.createIconSpan=function(){return a(c.createElement("span")).addClass("isearchbar-icon")},b.prototype.setListeners=function(){var a=this;return this.$input.on("focus",function(){return a.$root.addClass("isearchbar-focus")}),this.$input.on("blur",function(){return""===a.$input.val()?a.$root.removeClass("isearchbar-focus"):void 0}),this.$root.on("click",".isearchbar-cancel",function(b){return b.preventDefault(),a.$root.removeClass("isearchbar-focus"),a.$input.val("")})},b}(),a.fn[f]=function(b){return this.each(function(){return a.data(this,"plugin_"+f)?void 0:a.data(this,"plugin_"+f,new d(this,b))})}}(jQuery,window,document)}).call(this);